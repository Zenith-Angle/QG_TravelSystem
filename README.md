# 青甘大环线旅游服务系统

---
# 项目预览：
您可以通过访问：

[青甘大环线智能旅游服务系统](https://qg.zenithangle.top/)
来预览本系统

---
## 项目配置
### keys.json配置方式
本项目主要使用了天地图API，高德地图的API，和风天气的API，如果您想要使用本项目，您需要在项目根目录下创建一个`keys.json`文件，文件内容如下：
```json
{
  "tiandituKey": "天地图API",
  "AMAP_KEY": "高德地图API_1",
  "AMAP_API_KEY": "高德地图API_2",
  "apiKey": "和风天气API"
}
```

具体API的申请地址分别为：
    [天地图API](http://lbs.tianditu.gov.cn/home.html)
    [高德地图API](https://lbs.amap.com/)
    [和风天气API](https://dev.qweather.com/)

---
## 项目介绍

这是一个基于ArcGIS Map SDK for JavaScript的WebGIS项目。目的是建立一个以青甘大环线为主要区域的旅游规划应用

项目技术栈为: `ArcGIS Map SDK for JavaScript` + `VUE` + `TypeScript` + `Element Plus` + `Axios` + `Echarts`

青甘大环线，以其独特的自然风光、丰富的文化遗产和各具特色的地理环境，成为自驾旅行爱好者的热门选择之一。
然而，这条路线因其地理位置特殊，天气变化无常，给游客的行程安排和安全带来了不小的挑战。从路线规划到住宿选择，
再到应对高原反应等突发状况，游客需要面对诸多不确定性。这些挑战不仅可能影响旅行的体验，更可能对游客的安全构成威胁。
考虑到上述背景，我们认识到为游客提供一个集成化、智能化的旅游服务系统是十分必要的。该系统能够帮助游客更好地规划旅程、
应对突发情况，提升旅行体验。此外，随着智能手机和移动互联网的普及，利用技术手段解决旅游中的问题变得更加可行和有效。

---

## 项目服务功能

### 搜索功能

>目前的搜索功能基于[高德地图的行政区划搜索API](https://lbs.amap.com/api/webservice/guide/api/district)
实现

用户可以通过至多到县级行政区的关键字搜索，系统会将地图中心移动到指定位置
同时会在返回的地点上添加一个标记，点击标记可以查看该地的名称以及经纬度信息
例如输入：

> 甘肃/兰州/城关区


除此以外，用户还可以输入经纬度是数据，输入格式为"纬度,经度"，系统会将地图中心移动到指定位置.
例如输入：

> 104.154319,35.943354

### 天气查询功能

>该功能基于[和风天气API](https://dev.qweather.com/docs/api/weather/weather-now/)
实现

用户可以通过点击地图上的按钮来查询当前地图中心所在行政区的天气信息

单击该按钮，可以在地图上显示或关闭显示一个天气卡片：

点击下方的查询天气按钮，可以以当前地图中心所在行政区(至多到县级)的区域内最近
的天气状况。内容数据包括：

> 地点、天气状况、温度、体感温度、湿度、降水量、观测时间

### 位置查询及选择功能

用户可以通过点击地图上的`获取当前位置`按钮来查询当前地图中心所在位置的经纬度信息

目前改功能基于Html5的Geolocation API实现，所以在复杂网络环境
，如代理，多层NAT等情况 下可能无法获取到用户的位置信息或获取的
信息不准确

为了解决这个问题，如果您知道自己当前的位置，可以使用`手动选择位置`按钮
来自行选择一个位置，系统会将地图中心移动到指定位置。当再次点击后
可以退出该模式。

### 路线规划功能
>该功能基于[高德地图的驾车路径规划API](https://lbs.amap.com/api/webservice/guide/api/direction)
实现

当点击`路线`按钮后，会出现一个弹窗卡片，用户可以输入起点和终点
的名称，再点击其中的`确认`按钮，系统会在地图上显示出一条从起点到终点的驾车路线

重复点击`路线`按钮可以开关输入框的显示

在这个请求的过程中，会根据一个道路阻塞模型，将16个范围内
可能的高阻塞区域作为*avoidpolygons*参数传递给高德地图API

关于这个道路阻塞模型，可以参考文档：



### 周边查询功能
>该功能基于[高德地图的周边搜索API](https://lbs.amap.com/api/webservice/guide/api/search)
实现

>使用该功能前，强烈建议先获取用户的当前位置或手动选择一个位置，以便于更好的查询周边信息

当点击`周边`按钮后，会出现四个选项，分别是`餐饮`、`住宿`、`景点`、`加油站`，用户
可以选择其中一个选项进行点击，
系统会以在地图上显示出当前地图中心附近的对应类型的地点

用户可以点击地图上添加的点，点击后会出现一个气泡弹窗，显示该地点的名称、地址、距离等信息

> 注意：由于高德地图API的限制，周边查询的范围是以当前地图中心为中心的一个圆形区域
> 且最大半径为5000米，所以在某些情况下，可能无法查询到周边信息

---
## 项目地图功能


### 图层切换
点击右侧的图层切换按钮，可以切换地图的底图。

目前提供了三种天地图的底图，分别是：`矢量底图`、`卫星影像图`、`地形渲染图`
这三种数据来自于[天地图开发资源地图API](http://lbs.tianditu.gov.cn/server/MapService.html)

除此以外，还提供了OSM的底图，数据来自于[OpenStreetMap](https://www.openstreetmap.org/)

在众源的网络图层之外，本项目中还制作了热力图和交通图层。
#### 热力图
本次的热力图制作是利用通过爬取2023年范围内的微博签到数据及其
内容进行绘制。同时在各个景点的位置辅以百度指数进行绘制。

在范围内，对应的微博数据密度越高，百度指数越高，反应这个区域热度
越高，在热力图中反应为越趋近于红色；反之，则趋近于蓝色

热力图的发布地址为[青甘大环线热力图](https://data.lzu.edu.cn/server/rest/services/%E6%A2%81%E6%AD%A3%E7%82%9C_%E9%9D%92%E7%94%98%E5%A4%A7%E7%8E%AF%E7%BA%BF/HotPoint/MapServer)

#### 交通图
交通图的绘制是利用OpenStreetMap的数据，通过数据的`fclass`字段
来绘制不同类型的交通线路。在本项目中，我们绘制了`truck`、`motorway`、`primary`、`secondary`、`tertiary`几个类型的交通线路
在地图中，点击`交通图`按钮，即可开启交通图层。

